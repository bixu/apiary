# Copilot Instructions for Apiary

## API Reference Requirements

When refactoring or modifying any API-related code in this Rust CLI tool, always refer to the official Honeycomb.io
API documentation to ensure accuracy and consistency.

ðŸ”— **Primary Reference**: [Honeycomb API Documentation](https://docs.honeycomb.io/api/)

## Guidelines

### 1. API Endpoint Verification
- Verify endpoint paths, HTTP methods, and parameter requirements against the official docs
- Check for any new or deprecated endpoints before making changes
- Ensure request/response structures match the documented schemas

### 2. Authentication & Headers
- Confirm authentication requirements (API keys, team slugs)
- Validate required headers and their formats
- Reference environment-specific authentication patterns

### 3. Parameter Validation
- Cross-reference required vs optional parameters
- Verify parameter types, formats, and constraints
- Check environment variable usage patterns

### 4. Error Handling
- Review documented error responses and status codes
- Ensure error messages align with API error formats
- Validate retry logic and rate limiting handling

### 5. Resource Types
When working with specific resources, reference their dedicated documentation sections:
- **Boards**: Dashboard and visualization management
- **Burn Alerts**: SLO burn rate alerting
- **Calculated Fields**: Query definitions for Calculated Fields (aka Derived Columns)
- **Columns**: Columns storing telemetry attributes within datasets
- **Datasets**: Query operations, column management
- **Environments**: Environment-specific operations
- **Markers**: Event marker operations
- **SLOs**: Service Level Objective management
- **Triggers**: Alert and notification triggers

### 6. Code Consistency
- Maintain consistency with existing patterns in the codebase
- Follow the established error handling patterns using `anyhow`
- Use the same HTTP client patterns and configuration
- Preserve the established CLI argument structure with `clap`

### 7. Testing Considerations
- Ensure any changes maintain compatibility with existing integration tests
- Add appropriate test coverage for new functionality
- Validate against actual API responses when possible

## Before Submitting Changes
âœ… Confirm all API calls match the official documentation  
âœ… Test with real Honeycomb environments when possible  
âœ… Verify error handling covers documented failure cases  
âœ… Ensure CLI help text accurately reflects API requirements  
âœ… Check that environment variable usage follows established patterns
âœ… Always format using `cargo fmt` before committing
âœ… Always lint using `cargo clippy --all-targets --all-features -- -D warnings` before committing

---

*This project implements a CLI wrapper around the Honeycomb.io API. All implementations should prioritize accuracy with the official API over convenience or assumptions.*
